pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
statestart=0
stateplay=10
stateend=20
gamestate=statestart

t=0
x=0
y=0
friction =.9
ship = {
 pos = {
  x=40,
  y=60
 },
 vel= {
  speed =0,
  direction =0
 },
 acc=0.05,
 rotspeed = .03,
 rot = 0,
 col = 4,
  points = {
   {x=4,y=0},
   {x=-4,y=3},
   {x=-2,y=0},
   {x=-4,y=-3},
   {x=4,y=0}
},
}
testpoint = {x=5,y=10}
function rotatepoint(point,rotation)
 rotatedpoint ={
 x=
 (point.x*cos(rotation))-(point.y*sin(rotation)),
 y =
 (point.y*cos(rotation))+(point.x*sin(rotation))
 }
 return rotatedpoint
end
 
function drawshape(shape)
 local firstpoint = true
 local rotatedpoint = 0
 local lastpoint =0
 for k, point in ipairs(shape.points) do 
  rotatedpoint=rotatepoint(point,shape.rot)
  if firstpoint then
   lastpoint = rotatedpoint
   firstpoint= false
  else
   line(lastpoint.x + shape.pos.x,
   lastpoint.y + shape.pos.y,
   rotatedpoint.x+shape.pos.x,
   rotatedpoint.y+shape.pos.y,
   shape.col)
   lastpoint=rotatedpoint
  end
 end
end
function range(range)
 if range > 1 then
  range-=1
 end
 if range < 0 then 
  range+=1
 end
 return range
end
function checkbuttons()
 local adjrot=0
 -- thrust if btn(2) then speed+=.4 end
 if btn(0) then ship.rot+=ship.rotspeed end
 if btn(1) then ship.rot-=ship.rotspeed end
 ship.rot=range(ship.rot)
end
function thrust()
 local acc = {
  speed = ship.acc,
  direction = ship.rot
 }
 --check addvectors function
 ship.vel=addvectors(ship.vel,acc)
end
function addvectors(vector1,vector2)
 v1comp = getvectorcomp(vector1)
 v2comp = getvectorcomp(vector2)
 resultantx = v1comp.xcomp +v2comp.xcomp
 resultanty = v1comp.ycomp +v2comp.ycomp
 local resvector = comptovector(resultantx,resultanty)
 return resvector

end
function getvectorcomp(vector)
 local xcomp = vector.speed*cos(vector.direction)
 local ycomp= vector.speed*sin(vector.direction)
 local components = {
  xcomp = xcomp,
  ycomp = ycomp
 }
 return components
end
testvector=getvectorcomp(ship.vel)
function comptovector(x,y)
 local magnitude = sqrt((x*x)+(y*y))
 local direction = atan2(x,y)
 direction = range(direction)
 local vector = {
  speed = magnitude,
  direction = direction
 }
 return vector
end
function movepointbyvelocity(object)
 comp = getvectorcomp(object.vel)
 local newpos= {
  x=object.pos.x + comp.xcomp,
  y=object.pos.y + comp.ycomp
 }
 return newpos
end
 
function moveship()
-- ship.pos.x += cos(ship.rot)*1
-- ship.pos.y += sin(ship.rot)*1
 --speed*=friction
 if btn(2) then
  thrust()
 end
 
 ship.pos = movepointbyvelocity(ship)
 ship.pos.x%=(128) 
 ship.pos.y%=(128)
end
function randommoveship()
 if t%(flr(rnd(10)+20))==0 then
  speed = rnd(7)
  if t%2==0 then 
   ship.rot=rnd(1)
  end
 end
end
function _update()
 t+=1
 checkbuttons()
 moveship()
end
 
vec1={speed=1,direction=.5}
vec2={speed=5,direction=.1}
newvec=addvectors(vec1,vec2)
function _draw()
 cls()
 drawshape(ship)
-- line(target.x,target.y,target.x,targemt.y+10)
 print(newvec.speed,60,60)
 print(newvec.direction,60,70)
rect(0,0,127,127,3)
end

__gfx__
00000000000000008888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
00000000000000008888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
00000000000000008888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
0000000000000000888aaaaaa8888888888aaaaaa88888888aa88888888888888888aaaaa8888888888aaaaaa888888888888888888888888888888888888888
000000000000000088aaaaa77988888888aaaaa77988888888aaaaaaa8888888888aaaaa7988888888aaaaaa7988888888888888888888888888888888888888
00000000000000008aaaaaa707888888aaaaaaa70788888888aaaaa77988888888aaaaa7778888888aaaaaa77788888888888888888888888888888888888888
00000000000000008aa8aaaa798888888888aaaa79888888888aaaa70788888888aaaaa7708888888aa8aaa77088808888888888888888888888888888888888
0000000000000000a888899999888088888889999988888888888aaa7988888888aa89999988808888a889999988088888888888888888888888888888888888
0000000000000000888888888888088888888aaaa88888088888899999888888888a88888888088888888aaaa880888888888888888888888888888888888888
000000000000000088888aaaa88088888888aaaaa888008888888aaaa888000888888aaaa88088888888aaaaa808888888888888888888888888888888888888
00000000000000008888aaaaa80888888888aaaaa88008888888aaaaa80088888888aaaaa80888888888aaaaa988888888888888888888888888888888888888
00000000000000008888aaaaa98888888888aaaaa99888888888aaaaa98888888888aaaaa98888888888aaaaa988888888888888888888888888888888888888
00000000000000008888aaaaa988888888889999988888888888aaaaa88888888888aaaaa9888888888899999888888888888888888888888888888888888888
00000000000000008888999908888888888898898888888888889999988888888888999998888888888899999888888888888888888888888888888888888888
00000000000000008880888808888888888808808888888888888008888888888880888808888888888088880888888888888888888888888888888888888888
00000000000000008888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888880888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888088888888888888888888888
88888aaaaa88888888888aaaaa888888888888888888888888888888888888888888888888888888888888888888880888888888088888888888888888888888
8888aaaaa79888888888aaaaa79888888888aaaaa8888888888aaaaa8888888888aaaaa8888888888aaaaa888888808888aaaaa8808888888888888888888888
888aaaaa77788888888aaaaa77788888888aaaaa7988888888aaaaa7988888888aaaaa7988888888aaaaa798888808888aaaaa70808888888888888888888888
888a8aaa7708888888aa8aaa7708888888aaaaa7778888888aaaaa7778888888aaaaa77788888888aaaa7708888088888aaaa777808888888888888888888888
88a8889999980008888888999998808888a8aaa7708888888aaaaa7708888888aaaaa77088880008aaaa7778880888888aaaa777808888888888888888888888
88888aaaa880888888888aaaa88808088a8889999988888888a89999988888888a89999988808880a899999889888888aa899999898888888888888888888888
8888aaaaa80888888888aaaaa880888888888aaaa88800888888aaaa8888888888a8aaaa8a9888888a88aaaaaa888888a888aaaaaa8888888888888888888888
8888aaaaa98888888888aaaaaa9888888888aaaaa8808808888aaaaaa88800888888aaaaaa9888888888aaaaaa8888888888aaaaaa8888888888888888888888
8888aaaaa98888888888aaaaaa9888888888aaaaaa988808888aaaaaaa8088088888aaaaaa8888888888aaaaaa8888888888aaaaaa8888888888888888888888
888899999888888888889999988888888888aaaaaa9888888888aaaaaa98880888888aaaa888888888888aaaa888888888888aaaa88888888888888888888888
88889999988888888888999998888888888899999888888888889999989888088888899998888888888889999888888888888999988888888888888888888888
88808888088888888880888808888888888088880888888888888088088888888888880880888888888888808088888888888080888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888881111111118888888818888888888888888888888888888888888888888888888888888888888888888888888888883888888888888883888888888888
88888811111111118888888811888888888888888888888888888888888888888888888888888888888888888888888888830788888888888833788888888888
88888111111111118888888811188888888888888888888888888888888888888888888888888888888888888888888888883788888888888830388888888888
88881111111111118888888811118888888888888888888800000000000088888888888888888888888888888888888888830378888888888380878888888888
88811111111111118888888811111888888888888888888855555555555500000000000000000000000000000000000088880888888888888387838888888888
88111111111111118888888811111188888888888888888866666666666655555555555557775555555577555555555588888888888388888830788888888888
81111111111111118888888811111118888888888888888866666666666666666666666665556666666657666676666688888888883078888383838888888888
11111111111111118888888811111111888888888888888866666666666666666666666666666666666665666656666688888888838338888830787888888888
88888888888888888888877777777777777888888888888866666666666666666666666666666666888888888888888887878788888388888383838888888888
88888888888888877777766666666666666777777888888867777666666666666666666666666666878888888888888887888888838078883833887888888888
88888888877777766666666666666666666666666777777877777766666666666666666666666666888788878788888887787888833787888380788788888888
77777777766666666666666666666666666666666666666757755666666666666666666666666666878877888887888888878888883378888383878888888888
66666666666666666666666666666666666666666666666665566666667777766666666688888888888888887788878888887787838037883833883788888888
66666666666666666666666666666666666666666666666666666666677777566666666688888888888888888777888888888878888083888380378888888888
66666666666666666666666666666666666666666666666666666666655555666666666688888888888888888887787888888888888088883880887888888888
66666666666666666666666666666666666666666666666666666666666666666666666688888888888888888888888888888888888888888888888888888888
66666666888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
66666666888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
66666666888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
66666666888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
55555555888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88868888688888888888f8868888888888888668888888888886888868888888888f888868888888888888888888888888888888888888888888888888888888
88f66666666888888888f8f88f66f688886666f66666888888666666666688888ffff66666688888888888888888888888888888888888888888888888888888
88f6888888888888888fffff6688888888886688888868888888888888888888888ffff668888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
__map__
6f6f6f6f6f6f6f6f6f6f6f40436f6f005a5b00000000005a5b00005c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
6f6f6f6f40436f6f6f6f404141436f0000005a5c5a000000000000005a5b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
6f4043404141436f6f404141414143000000005a5b0000005a5c000000005c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4041414141414141414141414141414300000000005b5a000000005a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5051525354555050505050505051535500000000000000000000005b5a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
6060606060606060606060606060606000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
464748494a48484848484a4848484b4800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5857585858565857585856575858575800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000004e004d0000004e004d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000004d5e005d0000005e4d5d00004d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000004c5d00000000004c005d00004c5d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
